<template>
  <lightning-card>
    <template if:true={leaverequests}>
      <lightning-datatable
        key-field="Id"
        data={leaverequests}
        columns={columns}
        onrowaction={handleRowAction}
      ></lightning-datatable>
    </template>

    <template lwc:if={norecordsfound}>
      <div
        class="slds-align_absolute-center slds-p-around_small slds-text-heading_medium"
      >
        No Records Found
      </div>
    </template>
  </lightning-card>

  <template if:true={isEditModalOpen}>
    <section
      role="dialog"
      tabindex="-1"
      aria-modal="true"
      aria-labelledby="modal-heading-01"
      class="slds-modal slds-fade-in-open slds-modal_small"
    >
      <div class="slds-modal__container">
        <button
          class="slds-button slds-button_icon slds-modal__close"
          onclick={closeEditModal}
        >
          <lightning-icon
            icon-name="utility:close"
            alternative-text="close"
            size="small"
            variant="inverse"
          ></lightning-icon>
          <span class="slds-assistive-text">Cancel and close</span>
        </button>
        <div class="slds-modal__header">
          <h1
            id="modal-heading-01"
            class="slds-modal__title slds-hyphenate"
            tabindex="-1"
          >
            Leave Request Form
          </h1>
        </div>
        <div
          class="slds-modal__content slds-p-around_medium"
          id="modal-content-id-1"
        >
          <lightning-record-edit-form
            object-api-name="Leave_Request__c"
            record-id={recordId}
            onsuccess={handleSuccess}
            lwc:ref="leaveRequestForm"
          >
            <lightning-output-field
              field-name="User__c"
            ></lightning-output-field>

            <lightning-output-field
              field-name="FromDate__c"
            ></lightning-output-field>

            <lightning-output-field
              field-name="ToDate__c"
            ></lightning-output-field>

            <lightning-output-field
              field-name="Reason__c"
            ></lightning-output-field>

            <lightning-input-field
              field-name="Status__c"
            ></lightning-input-field>

            <lightning-input-field
              field-name="ManagerComment__c"
            ></lightning-input-field>

            <lightning-button
              variant="neutral"
              label="Cancel"
              onclick={closeEditModal}
            ></lightning-button>

            <lightning-button
              class="slds-m-top_medium"
              type="submit"
              label="Save"
              variant="brand"
            >
            </lightning-button>
          </lightning-record-edit-form>
        </div>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
  </template>
</template>
